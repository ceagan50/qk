<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QK SACCO - Financial Empowerment | Secure Financial Future</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
   <meta name="description" content=" Discover QKTradersSacco, a dynamic savings and credit member.">
    <style>
        :root {
            --primary-color: #4a00e0;
            --secondary-color: #8e2de2;
            --accent-color: #00c6fb;
            --dark-color: #1a1a2e;
            --light-color: #f8f9fa;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --text-color: #333;
            --text-light: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            line-height: 1.6;
            background-color: var(--light-color);
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo img {
            height: 50px;
            width: auto;
        }

        .logo-fallback {
            color: white;
            font-weight: 600;
            font-size: 1.5rem;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 25px;
            position: relative;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        nav ul li a:hover {
            color: var(--accent-color);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            z-index: 1;
            border-radius: 5px;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            color: var(--text-color);
            padding: 12px 16px;
            display: block;
        }

        .dropdown-content a:hover {
            background-color: var(--light-color);
            color: var(--primary-color);
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #00a8d6;
            transform: translateY(-2px);
        }

        .btn-outline {
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background-color: white;
            color: var(--primary-color);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .ned {
            background-image: linear-gradient(30deg, rgba(128, 0, 128, 0.726), rgba(255, 166, 0, 0.747));
            width: 100%;
            height: 100%;
        }

        .hero {
            background: url(istockphoto-1144287280-1024x1024.jpg);
            color: white;
            padding: 120px 0;
            position: relative;
            overflow: hidden;
            margin-top: 80px;
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }

        .hero .container {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-content {
            text-align: center;
            max-width: 800px;
        }

        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.897);
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #f1f1f1;
        }

        .hero-content .btn {
            margin: 0 10px;
        }

        .shapes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .shape {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .shape-1 {
            width: 100px;
            height: 100px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .shape-3 {
            width: 80px;
            height: 80px;
            bottom: 20%;
            left: 30%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-30px);
            }
        }

        .main-content {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--primary-color);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .service-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .service-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }

        .service-content {
            padding: 1.5rem;
        }

        .service-content h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .about-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            margin: 4rem 0;
        }

        .about-img {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .about-img img {
            width: 100%;
            height: auto;
            display: block;
        }

        .team-section {
            margin: 4rem 0;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .team-member {
            text-align: center;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .team-member img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 5px solid var(--light-color);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .join-steps {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin: 3rem 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .join-steps ol {
            padding-left: 1.5rem;
        }

        .join-steps li {
            margin-bottom: 1.5rem;
        }

        .social-media {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .social-icon:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .products {
            padding: 80px 0;
            background-color: var(--light-color);
        }

        .product-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 10px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-color);
        }

        .tab-btn.active {
            border-bottom: 3px solid var(--accent-color);
            color: var(--accent-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .product-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background-color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .product-table th, .product-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .product-table th {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .product-table tr:hover {
            background-color: var(--light-color);
        }

        footer {
            background: var(--dark-color);
            color: white;
            padding: 4rem 0 2rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            padding: 0 2rem;
        }

        .footer-column h3 {
            color: white;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--accent-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column li {
            margin-bottom: 0.8rem;
        }

        .footer-column a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-column a:hover {
            color: var(--accent-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Chatbot Styles */
        .chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
            z-index: 1000;
            animation: pulse 2s infinite;
        }

        .chat-button:hover {
            transform: scale(1.1);
        }

        .chat-button svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(78, 0, 224, 0.7);
            }
            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(78, 0, 224, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(78, 0, 224, 0);
            }
        }

        .chat-window {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 350px;
            height: 400px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 10px 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-header-logo {
            display: flex;
            align-items: center;
        }

        .chat-header-logo img {
            height: 30px;
            width: auto;
            margin-right: 10px;
        }

        .chat-header-logo .logo-fallback {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            display: none;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: var(--light-color);
        }

        .chat-message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .chat-message.user {
            align-items: flex-end;
        }

        .chat-message.bot {
            align-items: flex-start;
            display: flex;
            align-items: flex-start;
        }

        .chat-message p {
            max-width: 70%;
            padding: 10px;
            border-radius: 10px;
            margin: 5px 0;
        }

        .chat-message.user p {
            background: var(--accent-color);
            color: white;
        }

        .chat-message.bot p {
            background: white;
            color: var(--text-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-left: 30px;
        }

        .chat-message.bot .message-logo {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            align-self: flex-start;
        }

        .chat-message.bot .message-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .chat-message.bot .message-logo .logo-fallback {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-color);
            display: none;
        }

        .chat-footer {
            padding: 10px;
            border-top: 1px solid #eee;
            display: flex;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            outline: none;
        }

        .chat-send {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .chat-send:hover {
            background: #00a8d6;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 1s ease forwards;
        }

        .delay-1 { animation-delay: 0.2s; }
        .delay-2 { animation-delay: 0.4s; }
        .delay-3 { animation-delay: 0.6s; }

        /* Responsive Design */
        @media (max-width: 992px) {
            nav ul {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .about-section {
                grid-template-columns: 1fr;
            }
            
            .about-img {
                order: -1;
            }

            .chat-window {
                width: 90%;
                right: 5%;
            }
        }

        @media (max-width: 768px) {
            .hero {
                padding: 80px 0;
            }
            
            .hero-content h1 {
                font-size: 2rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            nav ul {
                position: fixed;
                top: 80px;
                left: 0;
                width: 100%;
                background: var(--dark-color);
                flex-direction: column;
                align-items: center;
                padding: 2rem 0;
            }
            
            nav ul li {
                margin: 1rem 0;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 60px 0;
            }
            
            .hero-content h1 {
                font-size: 1.8rem;
            }
            
            .main-content {
                padding: 0 1rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }

            .chat-window {
                height: 70vh;
                bottom: 80px;
            }

            .chat-header-logo img {
                height: 25px;
            }

            .chat-header h3 {
                font-size: 1rem;
            }

            .chat-message.bot .message-logo {
                width: 15px;
                height: 15px;
            }

            .chat-button {
                width: 50px;
                height: 50px;
            }

            .chat-button svg {
                width: 25px;
                height: 25px;
            }
        }
         /* Responsive Design */
        @media (max-width: 768px) {
            .hero {
                padding: 4rem 0;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .nav-links {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background-color: var(--dark);
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                padding-top: 2rem;
                transition: left 0.3s ease;
            }
            
            .nav-links.active {
                left: 0;
            }
            
            .nav-links li {
                margin: 1rem 0;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .map-frame {
                height: 400px;
            }
            
            .hero-image {
                max-width: 200px;
            }
            
            .chat-window {
                width: 90%;
                right: 5%;
            }
            
            .steps-container {
                flex-direction: column;
                align-items: center;
            }
            
            .step-card {
                width: 100%;
                max-width: 300px;
            }
        }
        
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .map-frame {
                height: 300px;
            }
            
            .hero-image {
                max-width: 150px;
            }
            
            .chat-window {
                height: 70vh;
                bottom: 80px;
            }
            
            .chat-header-logo img {
                height: 25px;
            }
            
            .chat-header h3 {
                font-size: 1rem;
            }
            
            .chat-message.bot .message-logo {
                width: 15px;
                height: 15px;
            }
            
            .chat-button {
                width: 50px;
                height: 50px;
            }
            
            .chat-button svg {
                width: 25px;
                height: 25px;
            }
        }
        @media (max-width: 576px) {
    .hero {
        padding: 60px 0;
    }
    
    .hero-content h1 {
        font-size: 1.8rem;
    }
    
    .main-content {
        padding: 0 1rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }

    /* Products Section */
    .products {
        padding: 40px 0;
    }

    .product-tabs {
        flex-direction: column;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .tab-btn {
        padding: 8px 20px;
        font-size: 0.9rem;
        width: 100%;
        text-align: center;
        border-radius: 5px;
    }

    .tab-btn.active {
        background-color: var(--accent-color);
        color: white;
        border-bottom: none;
    }

    .product-table {
        margin-top: 20px;
        font-size: 0.85rem;
    }

    .product-table th, .product-table td {
        padding: 10px;
        display: block;
        text-align: center;
        border-bottom: none;
    }

    .product-table thead {
        display: none;
    }

    .product-table tr {
        display: block;
        margin-bottom: 15px;
        padding: 10px;
        border: 1px solid #eee;
        border-radius: 5px;
    }

    .product-table td::before {
        content: attr(data-label);
        font-weight: 600;
        color: var(--primary-color);
        display: block;
        margin-bottom: 5px;
    }

    .product-table td[data-label="Loan Type"],
    .product-table td[data-label="Savings Type"] {
        font-size: 1rem;
        color: var(--text-color);
        font-weight: 500;
    }

    /* Chatbot Styles */
    .chat-window {
        width: 95%;
        height: 60vh;
        bottom: 70px;
        right: 2.5%;
        border-radius: 8px;
    }

    .chat-header {
        padding: 8px 12px;
    }

    .chat-header-logo img {
        height: 20px;
    }

    .chat-header h3 {
        font-size: 0.9rem;
    }

    .chat-close {
        font-size: 1rem;
    }

    .chat-body {
        padding: 10px;
    }

    .chat-message p {
        max-width: 85%;
        padding: 8px;
        font-size: 0.85rem;
    }

    .chat-message.bot .message-logo {
        width: 15px;
        height: 15px;
    }

    .chat-footer {
        padding: 8px;
    }

    .chat-input {
        padding: 8px;
        font-size: 0.85rem;
    }

    .chat-send {
        padding: 8px 12px;
        font-size: 0.85rem;
    }

    .chat-button {
        width: 50px;
        height: 50px;
        bottom: 15px;
        right: 15px;
    }

    .chat-button svg {
        width: 25px;
        height: 25px;
    }
}
    </style>
    <meta name="msvalidate.01" content="2E0FC01535AC22AF05349E588BE874A5" />
</head>
 
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <img src="1.png" alt="QK SACCO Logo" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                <span class="logo-fallback">QK SACCO</span>
            </div>
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="map.html">Location</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="services.html">Join Us</a></li>
                    <li class="dropdown">
                        <a href="#">Loans <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="#loans">Personal Loans</a>
                            <a href="#loans">Business Loans</a>
                            <a href="#loans">Education Loans</a>
                            <a href="#loans">Emergency Loans</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="#">Savings <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="#savings">Fixed Savings</a>
                            <a href="#savings">Regular Savings</a>
                            <a href="#savings">Target Savings</a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="ned">
            <div class="container">
                <div class="hero-content fade-in">
                    <h1>Welcome to QK TRADERS SACCO</h1>
                    <p>Your trusted partner in building a secure financial future through cooperative savings and accessible credit solutions.</p>
                    <div class="fade-in delay-1">
                        <a href="services.html" class="btn btn-primary">Join Now</a>
                        <a href="about.html" class="btn btn-outline">Learn More</a>
                    </div>
                </div>
            </div>
            <div class="shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Section -->
        <section class="welcome-section">
            <h2 class="section-title fade-in">Let Us Help You</h2>
            <div class="fade-in delay-1">
                <p>Welcome to Quadral Kaysacco, your trusted partner in financial growth and prosperity. As a member-owned cooperative, we are dedicated to providing you with innovative financial solutions and exceptional services.</p>
                <p>Explore our website to learn more about our services, benefits, and how to join our community.</p>
                <p style="color: var(--primary-color); font-weight: 500;">Tukwaniriza ku Quardal KaySacco customer Waffe omulungi.</p>
            </div>
        </section>

        <!-- Services Section -->
        <section class="services-section">
            <h2 class="section-title fade-in">Our Services</h2>
            <div class="services-grid">
                <div class="service-card fade-in delay-1">
                    <div class="service-img" style="background-image: url('loan.webp');"></div>
                    <div class="service-content">
                        <h3>Loans</h3>
                        <p>Affordable loan products tailored to meet your personal and business needs with flexible repayment terms.</p>
                    </div>
                </div>
                <div class="service-card fade-in delay-2">
                    <div class="service-img" style="background-image: url('investments.jpg');"></div>
                    <div class="service-content">
                        <h3>Insurance</h3>
                        <p>Comprehensive insurance coverage to protect you and your investments against unforeseen circumstances.</p>
                    </div>
                </div>
                <div class="service-card fade-in delay-3">
                    <div class="service-img" style="background-image: url('LL.jpg');"></div>
                    <div class="service-content">
                        <h3>Savings</h3>
                        <p>Various savings products that help you grow your money while maintaining easy access to your funds.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Section -->
        <section class="products fade-in">
            <div class="container">
                <h2 class="section-title">Our Products</h2>
                <div class="fade-in delay-1">
                    <p>Explore our range of financial products designed to meet your needs at every stage of life.</p>
                </div>
                
                <div class="product-tabs fade-in delay-2">
                    <button class="tab-btn active" data-tab="loans">Loans</button>
                    <button class="tab-btn" data-tab="savings">Savings</button>
                </div>
                
                <div id="loans" class="tab-content active fade-in delay-3">
                    <h3>Loan Products</h3>
                    <p>We offer various loan products with competitive interest rates and flexible repayment periods.</p>
                    
                    <table class="product-table">
                        <thead>
                            <tr>
                                <th>Loan Type</th>
                                <th>Interest Rate</th>
                                <th>Maximum Amount</th>
                                <th>Repayment Period</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Personal Development Loan</td>
                                <td>12% p.a.</td>
                                <td>5,000,000 UGX</td>
                                <td>Up to 24 months</td>
                            </tr>
                            <tr>
                                <td>Business Loan</td>
                                <td>14% p.a.</td>
                                <td>10,000,000 UGX</td>
                                <td>Up to 36 months</td>
                            </tr>
                            <tr>
                                <td>Education Loan</td>
                                <td>10% p.a.</td>
                                <td>3,000,000 UGX</td>
                                <td>Up to 12 months</td>
                            </tr>
                            <tr>
                                <td>Emergency Loan</td>
                                <td>15% p.a.</td>
                                <td>2,000,000 UGX</td>
                                <td>Up to 6 months</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div id="savings" class="tab-content fade-in delay-3">
                    <h3>Savings Products</h3>
                    <p>Grow your money safely with our range of savings products that earn you dividends annually.</p>
                    
                    <table class="product-table">
                        <thead>
                            <tr>
                                <th>Savings Type</th>
                                <th>Minimum Deposit</th>
                                <th>Interest Rate</th>
                                <th>Withdrawal Terms</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Regular Savings</td>
                                <td>10,000 UGX</td>
                                <td>8% p.a.</td>
                                <td>Any time</td>
                            </tr>
                            <tr>
                                <td>Fixed Savings</td>
                                <td>100,000 UGX</td>
                                <td>12% p.a.</td>
                                <td>After 6 months</td>
                            </tr>
                            <tr>
                                <td>Target Savings</td>
                                <td>50,000 UGX</td>
                                <td>10% p.a.</td>
                                <td>On target date</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="about-section">
            <div class="about-content fade-in">
                <h2 class="section-title">About Us</h2>
                <p>Quadral Kay is a saving and credit cooperative organization founded in 2020 with a mission to empower our members financially.</p>
                <p>Our core values are transparency, accountability, and member-centricity. We strive to create a supportive environment where our members can achieve their financial goals and build a brighter future.</p>
            </div>
            <div class="about-img fade-in delay-1">
                <img src="IMG-20240515-WA0003.jpg" alt="About QK SACCO">
            </div>
        </section>

        <!-- Team Section -->
        <section class="team-section">
            <h2 class="section-title fade-in">Our Management Team</h2>
            <div class="team-grid">
                <div class="team-member fade-in delay-1">
                    <img src="IMG-20240515-WA0003.jpg" alt="Team Member">
                    <h3>Leadership</h3>
                    <p>Experienced professionals guiding our SACCO</p>
                </div>
                <div class="team-member fade-in delay-2">
                    <img src="IMG-20240515-WA0002.jpg" alt="Team Member">
                    <h3>Field Officers</h3>
                    <p>Dedicated to serving our members</p>
                </div>
                <div class="team-member fade-in delay-3">
                    <img src="IMG-20240515-WA0002.jpg" alt="Team Member">
                    <h3>Support Staff</h3>
                    <p>Ensuring smooth operations</p>
                </div>
            </div>
            <div class="fade-in delay-2" style="margin-top: 2rem;">
                <p>Quadral Kay contains many workers starting from the field master and office workers who are there to provide Quadral Kay services about loans, growing small scale businesses, making investments and equipping people with financial knowledge.</p>
                <p style="font-weight: 500; margin-top: 1rem;">Thank you for choosing QK sacco limited.</p>
            </div>
        </section>

        <!-- Join Section -->
        <section class="join-section">
            <h2 class="section-title fade-in">Joining QK TRADERS SACCO</h2>
            <div class="join-steps fade-in delay-1">
                <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Steps for becoming a full member of the Quadral Kaysacco</h3>
                <ol>
                    <li><strong>Step 1:</strong> Reach the Offices or contact us via WhatsApp: +256-702801507 (which caters for people abroad)</li>
                    <li><strong>Step 2:</strong> Buy the required membership book and account opening fee which is only 10,000 UGX (about 3 USD)</li>
                    <li><strong>Step 3:</strong> Fill in the required forms that will be provided</li>
                    <li><strong>Step 4:</strong> Now one gains the full benefits of being part of Quadral kay Sacco to live better</li>
                </ol>
            </div>
            <div class="fade-in delay-2" style="text-align: center; margin: 2rem 0;">
                <h3 style="color: var(--primary-color);">To Live Better Walk With Us</h3>
            </div>
        </section>

        <!-- Social Media -->
        <section class="social-section">
            <h2 class="section-title fade-in">Connect With Us</h2>
            <div class="social-media">
                <a href="http://wa.me/+256702801507" class="social-icon" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="https://www.youtube.com/channel/UCuh3HxplZlNXIbYhBjaaCZQ" class="social-icon" title="YouTube">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://www.FaceBook.com/quadralkay" class="social-icon" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://x.com/@QkTradersNdeeba" class="social-icon" title="X">
                    <i class="fa-solid fa-x"></i>
                </a>
                <a href="https://www.tiktok.com/@qktraderssacco" class="social-icon" title="TikTok">
                    <i class="fa-brands fa-tiktok"></i>
                </a>
            </div>
        </section>
    </main>

    <!-- Chatbot Interface -->
    <div class="chat-button" id="chatButton">
        <svg viewBox="0 0 24 24">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
            <path d="M9 11h2v2H9zm4 0h2v2h-2z" fill="#fff"/>
        </svg>
    </div>
    <div class="chat-window" id="chatWindow">
        <div class="chat-header">
            <div class="chat-header-logo">
                <img src="1.png" alt="QK SACCO Logo" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                <span class="logo-fallback">QK SACCO</span>
            </div>
            <h3>Assistant</h3>
            <button class="chat-close" id="chatClose"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message bot">
                <div class="message-logo">
                    <img src="1.png" alt="QK SACCO" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                    <span class="logo-fallback">QK</span>
                </div>
                <p>Hi there! I'm your QK SACCO Assistant, ready to help with your financial queries. May I have your name, please?</p>
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" class="chat-input" id="chatInput" placeholder="Type your name or question...">
            <button class="chat-send" id="chatSend">Send</button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Why Choose Our SACCO</h3>
                <ul>
                    <li>Competitive Financial services</li>
                    <li>Expert advice and guidance</li>
                    <li>Secure and trusted transactions</li>
                    <li>Flexible and affordable options</li>
                    <li>Community support and benefits</li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Us</h3>
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> Opposite KCB bank in Ndeeba</li>
                    <li><i class="fas fa-phone"></i> +256-702801507</li>
                    <li><i class="fas fa-envelope"></i> quadralpeoplesacco@gmail.com</li>
                    <li><i class="fas fa-clock"></i> 7:00 AM - 4:00 PM (Mon-Fri)</li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="map.html">Location</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="services.html">Join Us</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 QK TRADERS SACCO. All Rights Reserved.</p>
            <p>Developed by TxT Tech Africa</p>
        </div>
    </footer>

    <script>
        // Mobile Menu Toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const nav = document.querySelector('nav ul');
        
        mobileMenuBtn.addEventListener('click', () => {
            nav.style.display = nav.style.display === 'block' ? 'none' : 'block';
        });

        // Product Tabs
        document.addEventListener('DOMContentLoaded', () => {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabBtns.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        });

        // Scroll animations
        const fadeElements = document.querySelectorAll('.fade-in');
        
        const fadeInOnScroll = () => {
            fadeElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (elementTop < windowHeight - 100) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        };
        
        fadeInOnScroll();
        window.addEventListener('scroll', fadeInOnScroll);

        // Chatbot Functionality
        const chatButton = document.getElementById('chatButton');
        const chatWindow = document.getElementById('chatWindow');
        const chatClose = document.getElementById('chatClose');
        const chatInput = document.getElementById('chatInput');
        const chatSend = document.getElementById('chatSend');
        const chatBody = document.getElementById('chatBody');

        // Toggle chat window
        chatButton.addEventListener('click', () => {
            chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
        });

        chatClose.addEventListener('click', () => {
            chatWindow.style.display = 'none';
        });

        // Chatbot Response Logic
        let userName = null;
        let userTitle = 'Dear member';
        let nameRequested = true;
        let lastTopic = null;
        const politePhrases = [
            'Thanks for asking!',
            'Happy to help!',
            'Great question!',
            'I’m glad you asked!',
            'Good to know!',
            'I’m here for you!',
            'Nice to assist you!'
        ];
        const followUpQuestions = [
            'Would you like to explore our loan options further?',
            'Interested in learning about our savings products?',
            'Curious about how to join QK SACCO?',
            'Need help with something specific?',
            'Want to know more about our insurance offerings?'
        ];

        // Financial data for calculations
        const loanData = [
            { type: 'Personal Development Loan', rate: 0.12, maxAmount: 5000000, maxTerm: 24 },
            { type: 'Business Loan', rate: 0.14, maxAmount: 10000000, maxTerm: 36 },
            { type: 'Education Loan', rate: 0.10, maxAmount: 3000000, maxTerm: 12 },
            { type: 'Emergency Loan', rate: 0.15, maxAmount: 2000000, maxTerm: 6 }
        ];

        const savingsData = [
            { type: 'Regular Savings', minDeposit: 10000, rate: 0.08, withdrawal: 'Any time' },
            { type: 'Fixed Savings', minDeposit: 100000, rate: 0.12, withdrawal: 'After 6 months' },
            { type: 'Target Savings', minDeposit: 50000, rate: 0.10, withdrawal: 'On target date' }
        ];

        // Financial calculation functions
        function calculateLoanPayment(principal, annualRate, months) {
            const monthlyRate = annualRate / 12;
            const payment = (principal * monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
            return Math.round(payment * 100) / 100;
        }

        function calculateSavingsGrowth(principal, annualRate, years, compoundFrequency = 1) {
            const ratePerPeriod = annualRate / compoundFrequency;
            const periods = years * compoundFrequency;
            const amount = principal * Math.pow(1 + ratePerPeriod, periods);
            return Math.round(amount * 100) / 100;
        }

        // Chart generation function
        function generateChart(data, labels, title, chartType = 'bar') {
            const chartConfig = {
                type: chartType,
                data: {
                    labels: labels,
                    datasets: [{
                        label: title,
                        data: data,
                        backgroundColor: ['#4a00e0', '#8e2de2', '#00c6fb', '#28a745'],
                        borderColor: ['#3a00b0', '#6e1db2', '#0096cb', '#1f7a34'],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: chartType === 'bar' ? {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: title.includes('Interest') ? 'Interest Rate (%)' : 'Amount (UGX)'
                            }
                        }
                    } : {},
                    plugins: {
                        legend: {
                            display: true
                        },
                        title: {
                            display: true,
                            text: title
                        }
                    }
                }
            };
            return chartConfig;
        }

        // Response definitions
        const responses = [
            {
                keywords: [/loan(s)?/, /borrow/, /credit/, /financing/],
                response: input => {
                    if (/compare|comparison|chart/i.test(input)) {
                        const chartData = loanData.map(loan => loan.rate * 100);
                        const chartLabels = loanData.map(loan => loan.type);
                        const chart = generateChart(chartData, chartLabels, 'Loan Interest Rates Comparison', 'bar');
                        return {
                            text: `Here’s a comparison of our loan interest rates. ${followUpQuestions[1]}`,
                            chart: chart
                        };
                    }
                    const followUp = followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)];
                    return `QK SACCO offers a range of loans: Personal Development (12% p.a., up to 5M UGX), Business (14% p.a., up to 10M UGX), Education (10% p.a., up to 3M UGX), and Emergency (15% p.a., up to 2M UGX). ${followUp}`;
                },
                score: 0.9,
                topic: 'loans'
            },
            {
                keywords: [/personal loan(s)?/, /personal development loan/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(m|million)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000000 : 1000);
                        if (amount <= 5000000) {
                            const monthlyPayment = calculateLoanPayment(amount, 0.12, 24);
                            return `For a Personal Development Loan of ${amount} UGX at 12% p.a. over 24 months, your monthly repayment would be approximately ${monthlyPayment} UGX. Contact +256-702801507 to apply. ${followUpQuestions[0]}`;
                        }
                        return `The Personal Development Loan has a maximum of 5,000,000 UGX. Please specify an amount within this limit. ${followUpQuestions[2]}`;
                    }
                    return `The Personal Development Loan offers up to 5,000,000 UGX at 12% p.a. over 24 months. Specify an amount (e.g., 2 million) for a repayment estimate or contact +256-702801507. ${followUpQuestions[0]}`;
                },
                score: 0.95,
                topic: 'personal loan'
            },
            {
                keywords: [/business loan(s)?/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(m|million)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000000 : 1000);
                        if (amount <= 10000000) {
                            const monthlyPayment = calculateLoanPayment(amount, 0.14, 36);
                            return `For a Business Loan of ${amount} UGX at 14% p.a. over 36 months, your monthly repayment would be approximately ${monthlyPayment} UGX. Contact +256-702801507 to apply. ${followUpQuestions[0]}`;
                        }
                        return `The Business Loan has a maximum of 10,000,000 UGX. Please specify an amount within this limit. ${followUpQuestions[2]}`;
                    }
                    return `The Business Loan offers up to 10,000,000 UGX at 14% p.a. over 36 months. Specify an amount for a repayment estimate or contact +256-702801507. ${followUpQuestions[0]}`;
                },
                score: 0.95,
                topic: 'business loan'
            },
            {
                keywords: [/education loan(s)?/, /school loan/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(m|million)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000000 : 1000);
                        if (amount <= 3000000) {
                            const monthlyPayment = calculateLoanPayment(amount, 0.10, 12);
                            return `For an Education Loan of ${amount} UGX at 10% p.a. over 12 months, your monthly repayment would be approximately ${monthlyPayment} UGX. Contact +256-702801507 to apply. ${followUpQuestions[0]}`;
                        }
                        return `The Education Loan has a maximum of 3,000,000 UGX. Please specify an amount within this limit. ${followUpQuestions[2]}`;
                    }
                    return `The Education Loan provides up to 3,000,000 UGX at 10% p.a. over 12 months. Specify an amount for a repayment estimate or contact +256-702801507. ${followUpQuestions[0]}`;
                },
                score: 0.95,
                topic: 'education loan'
            },
            {
                keywords: [/emergency loan(s)?/, /urgent loan/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(m|million)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000000 : 1000);
                        if (amount <= 2000000) {
                            const monthlyPayment = calculateLoanPayment(amount, 0.15, 6);
                            return `For an Emergency Loan of ${amount} UGX at 15% p.a. over 6 months, your monthly repayment would be approximately ${monthlyPayment} UGX. Contact +256-702801507 for quick assistance. ${followUpQuestions[0]}`;
                        }
                        return `The Emergency Loan has a maximum of 2,000,000 UGX. Please specify an amount within this limit. ${followUpQuestions[2]}`;
                    }
                    return `The Emergency Loan offers up to 2,000,000 UGX at 15% p.a. over 6 months. Specify an amount for a repayment estimate or contact +256-702801507. ${followUpQuestions[0]}`;
                },
                score: 0.95,
                topic: 'emergency loan'
            },
            {
                keywords: [/saving(s)?/, /account/, /deposit/],
                response: input => {
                    if (/compare|comparison|chart/i.test(input)) {
                        const chartData = savingsData.map(saving => saving.rate * 100);
                        const chartLabels = savingsData.map(saving => saving.type);
                        const chart = generateChart(chartData, chartLabels, 'Savings Interest Rates Comparison', 'bar');
                        return {
                            text: `Here’s a comparison of our savings interest rates. ${followUpQuestions[1]}`,
                            chart: chart
                        };
                    }
                    const followUp = followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)];
                    return `QK SACCO offers Regular Savings (8% p.a., 10,000 UGX min), Fixed Savings (12% p.a., 100,000 UGX min), and Target Savings (10% p.a., 50,000 UGX min). ${followUp}`;
                },
                score: 0.9,
                topic: 'savings'
            },
            {
                keywords: [/regular saving(s)?/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(k|thousand)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000 : 1);
                        if (amount >= 10000) {
                            const growth = calculateSavingsGrowth(amount, 0.08, 1);
                            return `With ${amount} UGX in Regular Savings at 8% p.a., you’d have approximately ${growth} UGX after one year. Contact +256-702801507 to start. ${followUpQuestions[1]}`;
                        }
                        return `Regular Savings requires a minimum deposit of 10,000 UGX. Please specify an amount above this limit. ${followUpQuestions[2]}`;
                    }
                    return `Regular Savings requires a 10,000 UGX minimum deposit, earns 8% p.a., and allows withdrawals anytime. Specify an amount for a growth estimate or contact +256-702801507. ${followUpQuestions[1]}`;
                },
                score: 0.95,
                topic: 'regular savings'
            },
            {
                keywords: [/fixed saving(s)?/, /fixed deposit/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(k|thousand)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000 : 1);
                        if (amount >= 100000) {
                            const growth = calculateSavingsGrowth(amount, 0.12, 1);
                            return `With ${amount} UGX in Fixed Savings at 12% p.a., you’d have approximately ${growth} UGX after one year (withdrawals after 6 months). Contact +256-702801507 to start. ${followUpQuestions[1]}`;
                        }
                        return `Fixed Savings requires a minimum deposit of 100,000 UGX. Please specify an amount above this limit. ${followUpQuestions[2]}`;
                    }
                    return `Fixed Savings requires a 100,000 UGX minimum deposit, earns 12% p.a., and allows withdrawals after 6 months. Specify an amount for a growth estimate or contact +256-702801507. ${followUpQuestions[1]}`;
                },
                score: 0.95,
                topic: 'fixed savings'
            },
            {
                keywords: [/target saving(s)?/, /goal saving/],
                response: input => {
                    const match = input.match(/(\d+\.?\d*)\s*(k|thousand)?/i);
                    if (match && match[1]) {
                        const amount = parseFloat(match[1]) * (match[2] ? 1000 : 1);
                        if (amount >= 50000) {
                            const growth = calculateSavingsGrowth(amount, 0.10, 1);
                            return `With ${amount} UGX in Target Savings at 10% p.a., you’d have approximately ${growth} UGX after one year (withdraw on target date). Contact +256-702801507 to set up. ${followUpQuestions[1]}`;
                        }
                        return `Target Savings requires a minimum deposit of 50,000 UGX. Please specify an amount above this limit. ${followUpQuestions[2]}`;
                    }
                    return `Target Savings requires a 50,000 UGX minimum deposit, earns 10% p.a., and allows withdrawals on your target date. Specify an amount for a growth estimate or contact +256-702801507. ${followUpQuestions[1]}`;
                },
                score: 0.95,
                topic: 'target savings'
            },
            {
                keywords: [/membership/, /join/, /become a member/, /sign up/],
                response: `To join QK SACCO, visit our offices opposite KCB bank in Ndeeba or contact +256-702801507, pay a 10,000 UGX fee, and fill out the forms. ${followUpQuestions[2]}`,
                score: 0.9,
                topic: 'membership'
            },
            {
                keywords: [/insurance/, /protection/, /coverage/],
                response: `QK SACCO offers comprehensive insurance to protect your investments. Contact +256-702801507 for details. ${followUpQuestions[4]}`,
                score: 0.85,
                topic: 'insurance'
            },
            {
                keywords: [/contact/, /reach/, /call/, /email/, /whatsapp/],
                response: `Reach QK SACCO at +256-702801507, email quadralpeoplesacco@gmail.com, or visit us opposite KCB bank in Ndeeba (7:00 AM - 4:00 PM, Mon-Fri). ${followUpQuestions[3]}`,
                score: 0.8,
                topic: 'contact'
            },
            {
                keywords: [/location/, /where/, /address/, /office/],
                response: `Our offices are opposite KCB bank in Ndeeba. Contact +256-702801507 for directions. ${followUpQuestions[3]}`,
                score: 0.8,
                topic: 'location'
            },
            {
                keywords: [/interest rate/, /rate/, /cost/],
                response: input => {
                    if (/compare|comparison|chart/i.test(input)) {
                        const chartData = loanData.map(loan => loan.rate * 100).concat(savingsData.map(saving => saving.rate * 100));
                        const chartLabels = loanData.map(loan => loan.type).concat(savingsData.map(saving => saving.type));
                        const chart = generateChart(chartData, chartLabels, 'Interest Rates Comparison (Loans & Savings)', 'bar');
                        return {
                            text: `Here’s a comparison of interest rates for our loans and savings. ${followUpQuestions[3]}`,
                            chart: chart
                        };
                    }
                    return `Interest rates: Personal Loan (12% p.a.), Business Loan (14% p.a.), Education Loan (10% p.a.), Emergency Loan (15% p.a.), Regular Savings (8% p.a.), Fixed Savings (12% p.a.), Target Savings (10% p.a.). ${followUpQuestions[3]}`;
                },
                score: 0.85,
                topic: 'interest rates'
            },
            {
                keywords: [/eligibility/, /qualify/, /requirements/],
                response: `To qualify for QK SACCO services, become a member by paying 10,000 UGX and filling out forms. Contact +256-702801507 for details. ${followUpQuestions[2]}`,
                score: 0.85,
                topic: 'eligibility'
            },
            {
                keywords: [/apply/, /application/, /how to get/],
                response: `Apply for QK SACCO services by visiting our offices in Ndeeba or contacting +256-702801507. Membership is required. ${followUpQuestions[2]}`,
                score: 0.85,
                topic: 'application'
            },
            {
                keywords: [/thank/, /appreciate/],
                response: `You’re very welcome! ${followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)]}`,
                score: 0.5,
                topic: 'thanks'
            },
            {
                keywords: [/ok/, /okay/, /alright/],
                response: `Got it! ${followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)]}`,
                score: 0.5,
                topic: 'ok'
            },
            {
                keywords: [/greeting/, /hello/, /hi/, /hey/],
                response: `Hello! Excited to assist you with QK SACCO’s financial services. ${followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)]}`,
                score: 0.5,
                topic: 'greeting'
            },
            {
                keywords: [/bye/, /goodbye/, /see you/, /farewell/],
                response: input => {
                    const now = new Date();
                    const hour = now.getHours();
                    if (/night/i.test(input) || hour >= 18) {
                        return userName ? `Good night, ${userTitle} ${userName}! Wishing you a restful evening.` : `Good night! Wishing you a restful evening.`;
                    }
                    return userName ? `Goodbye, ${userTitle} ${userName}! Have a fantastic day!` : `Goodbye! Have a fantastic day!`;
                },
                score: 0.5,
                topic: 'bye'
            },
            {
                keywords: [/good night/, /goodnight/],
                response: userName ? `Good night, ${userTitle} ${userName}! Wishing you a restful evening.` : `Good night! Wishing you a restful evening.`,
                score: 0.6,
                topic: 'good night'
            },
            {
                keywords: [/safe journey/, /travel safe/, /safe travels/],
                response: userName ? `Thank you, ${userTitle} ${userName}! Wishing you a safe and pleasant journey.` : `Thank you! Wishing you a safe and pleasant journey.`,
                score: 0.6,
                topic: 'safe journey'
            },
            {
                keywords: [/done/, /no/],
                response: () => {
                    const now = new Date();
                    const hour = now.getHours();
                    if (hour >= 18) {
                        return userName ? `Alright, ${userTitle} ${userName}, we're done for now. Wishing you a wonderful evening! Come back anytime.` : `Alright, we're done for now. Wishing you a wonderful evening! Come back anytime.`;
                    } else if (hour >= 12) {
                        return userName ? `Okay, ${userTitle} ${userName}, all set for now. Have a great afternoon! Let me know if you need more help later.` : `Okay, all set for now. Have a great afternoon! Let me know if you need more help later.`;
                    } else {
                        return userName ? `Got it, ${userTitle} ${userName}, we're done for now. Wishing you a fantastic morning! Feel free to reach out anytime.` : `Got it, we're done for now. Wishing you a fantastic morning! Feel free to reach out anytime.`;
                    }
                },
                score: 0.6,
                topic: 'done'
            }
        ];

        const defaultResponse = {
            response: () => {
                const followUp = followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)];
                return `I’m here to assist with QK SACCO’s services like loans, savings, or membership. ${followUp}`;
            },
            score: 0.1,
            topic: 'default'
        };

        const namePromptResponse = {
            response: `I’d love to address you by name. Could you share your name, please? In the meantime, how can I assist you with QK SACCO services?`,
            score: 0.2,
            topic: 'name_prompt'
        };

        function inferTitle(name) {
            if (!name) return 'Dear member';
            const lastChar = name.trim().toLowerCase().slice(-1);
            if (['a', 'e', 'i', 'o', 'u'].includes(lastChar)) {
                return 'Ms.';
            }
            return 'Mr.';
        }

        function isNameInput(input) {
            return /^[a-zA-Z]+$/.test(input) && !responses.some(r => r.keywords.some(k => k.test(input)));
        }

        function addMessage(message, isUser, chart = null) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message', isUser ? 'user' : 'bot');
            
            if (!isUser) {
                const logoDiv = document.createElement('div');
                logoDiv.classList.add('message-logo');
                logoDiv.innerHTML = `
                    <img src="1.png" alt="QK SACCO" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                    <span class="logo-fallback">QK</span>
                `;
                messageDiv.appendChild(logoDiv);
            }
            
            const messageP = document.createElement('p');
            messageP.textContent = message;
            messageDiv.appendChild(messageP);
            chatBody.appendChild(messageDiv);

            if (chart && !isUser) {
                const chartDiv = document.createElement('div');
                chartDiv.classList.add('chat-message', 'bot');
                chartDiv.innerHTML = `
                    <div class="message-logo">
                        <img src="1.png" alt="QK SACCO" onerror="this.style.display='none';this.nextElementSibling.style.display='block';">
                        <span class="logo-fallback">QK</span>
                    </div>
                    <p>Here’s a visual representation:</p>
                    <pre><code type="chartjs">${JSON.stringify(chart, null, 2)}</code></pre>
                `;
                chatBody.appendChild(chartDiv);
            }

            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function getBotResponse(userInput) {
            const input = userInput.toLowerCase().trim();
            let bestMatch = defaultResponse;
            let highestScore = 0;

            // Handle name input
            if (nameRequested && isNameInput(input)) {
                userName = input.charAt(0).toUpperCase() + input.slice(1);
                userTitle = inferTitle(userName);
                nameRequested = false;
                lastTopic = null;
                return `Thank you, ${userTitle} ${userName}! ${followUpQuestions[Math.floor(Math.random() * followUpQuestions.length)]}`;
            }

            // Prompt for name if not provided
            if (nameRequested && !isNameInput(input)) {
                nameRequested = false;
                let response = namePromptResponse.response;
                responses.forEach(r => {
                    let matchScore = 0;
                    r.keywords.forEach(keyword => {
                        if (keyword.test(input)) {
                            matchScore += r.score / r.keywords.length;
                        }
                    });
                    if (matchScore > highestScore) {
                        highestScore = matchScore;
                        bestMatch = r;
                    }
                });
                if (highestScore >= 0.15) {
                    const responseData = typeof bestMatch.response === 'function' ? bestMatch.response(input) : bestMatch.response;
                    if (typeof responseData === 'object' && responseData.text) {
                        return { text: responseData.text, chart: responseData.chart };
                    }
                    response = responseData;
                    lastTopic = bestMatch.topic;
                }
                return response;
            }

            // Normal response matching
            responses.forEach(response => {
                let matchScore = 0;
                response.keywords.forEach(keyword => {
                    if (keyword.test(input)) {
                        matchScore += response.score / response.keywords.length;
                    }
                });
                if (matchScore > highestScore) {
                    highestScore = matchScore;
                    bestMatch = response;
                }
            });

            // Handle default response
            if (highestScore < 0.15) {
                let response = typeof defaultResponse.response === 'function' ? defaultResponse.response() : defaultResponse.response;
                if (userName) {
                    response = `${userTitle} ${userName}, ${response}`;
                }
                return response;
            }

            // Process response
            let finalResponse = typeof bestMatch.response === 'function' ? bestMatch.response(input) : bestMatch.response;
            const politePrefix = politePhrases[Math.floor(Math.random() * politePhrases.length)];

            if (typeof finalResponse === 'object' && finalResponse.text) {
                finalResponse.text = userName ? `${userTitle} ${userName}, ${politePrefix} ${finalResponse.text}` : `${politePrefix} ${finalResponse.text}`;
                if (lastTopic && bestMatch.topic !== lastTopic && !['thanks', 'ok', 'greeting', 'bye', 'good night', 'safe journey', 'done'].includes(bestMatch.topic)) {
                    const contextPrefixes = [
                        `Shifting from ${lastTopic}, `,
                        `Thanks for exploring a new topic! `,
                        `Moving on to something new, `
                    ];
                    const contextPrefix = contextPrefixes[Math.floor(Math.random() * contextPrefixes.length)];
                    finalResponse.text = contextPrefix + finalResponse.text;
                }
                lastTopic = bestMatch.topic;
                return finalResponse;
            }

            finalResponse = userName ? `${userTitle} ${userName}, ${politePrefix} ${finalResponse}` : `${politePrefix} ${finalResponse}`;
            if (lastTopic && bestMatch.topic !== lastTopic && !['thanks', 'ok', 'greeting', 'bye', 'good night', 'safe journey', 'done'].includes(bestMatch.topic)) {
                const contextPrefixes = [
                    `Shifting from ${lastTopic}, `,
                    `Thanks for exploring a new topic! `,
                    `Moving on to something new, `
                ];
                const contextPrefix = contextPrefixes[Math.floor(Math.random() * contextPrefixes.length)];
                finalResponse = contextPrefix + finalResponse;
            }

            lastTopic = bestMatch.topic;
            return finalResponse;
        }

        chatSend.addEventListener('click', () => {
            const userInput = chatInput.value.trim();
            if (userInput) {
                addMessage(userInput, true);
                const botResponse = getBotResponse(userInput);
                setTimeout(() => {
                    if (typeof botResponse === 'object' && botResponse.text) {
                        addMessage(botResponse.text, false, botResponse.chart);
                    } else {
                        addMessage(botResponse, false);
                    }
                }, 500);
                chatInput.value = '';
            }
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInput.value.trim()) {
                chatSend.click();
            }
        });
    </script>
</body>
</html>
